<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title>Contractor Buddy Demo</title>
    	<meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- 
Flex Template 
https://templatemo.com/tm-406-flex
-->
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
        
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/font-awesome.css">
        <link rel="stylesheet" href="css/animate.css">
        <link rel="stylesheet" href="css/templatemo_misc.css">
        <link rel="stylesheet" href="css/templatemo_style.css">     

        <script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->


        <div class="site-main" id="sTop">
            <div class="site-header">
                <div class="container">
                    <div class="row row-eq-height">
                        <div class="col-md-12 text-center">
                            <ul class="social-icons">
                                <li><a href="#" class="fa fa-facebook"></a></li>
                                <li><a href="#" class="fa fa-twitter"></a></li>
                                <li><a href="#" class="fa fa-dribbble"></a></li>
                                <li><a href="#" class="fa fa-linkedin"></a></li>
                            </ul>
                        </div> <!-- /.col-md-12 -->
                    </div> <!-- /.row -->
                </div> <!-- /.container -->
                <div class="main-header">
                    <div class="container">
                        <div id="menu-wrapper">
                            <div class="row">
                                <div class="logo-wrapper col-md-2 col-sm-2">
                                    <h1>
                                        <a href="#">Flex</a>
                                    </h1>
                                </div> <!-- /.logo-wrapper -->
                                <div class="col-md-10 col-sm-10 main-menu text-right">
                                    <div class="toggle-menu visible-sm visible-xs"><i class="fa fa-bars"></i></div>
                                    <ul class="menu-first">
                                        <li class="active"><a href="index.html">Home</a></li>
                                        <li><a href="assets/client.html">Client</a></li>
                                        <li><a href="/vendor.html">Vendor</a></li>
                                        <li><a href="#our-team">Team</a></li>
                                        <li><a href="https://fb.com/templatemo" class="external" rel="nofollow">External</a></li> 
                                        <li><a href="#contact">Contact</a></li>                                 
                                    </ul>                                    
                                </div> <!-- /.main-menu -->
                            </div> <!-- /.row -->
                        </div> <!-- /#menu-wrapper -->                        
                    </div> <!-- /.container -->
                </div> <!-- /.main-header -->
            </div> <!-- /.site-header -->

            <div class="content-section" id="services">
                    <div class="container">
                        <div class="row">
                            <div class="heading-section col-md-12 text-center">
                                <h2>Client Page</h2>
                                <p>Manage your profile, find Pros & get Quotes</p>
                            </div> <!-- /.heading-section -->
                        </div> <!-- /.row -->
                        <div class="row">
                            <div class="col-md-3 col-sm-6">

                                <div class="service-item" id="service-1">
                                    
                                        <div class="member-thumb">
                                                <img src="images/profile.png" alt="">
                                                <div class="team-overlay">
                                                    <h3>{{.Name}}</h3>
                                                    <span>Client Profile</span>

                                                    <div class="contact-form">                                                                                       
                                                        <form name="profileform" id="profileform" onsubmit="event.preventDefault();updateFunction(this, event);">
                                                            <p>
                                                                <input name="name" type="text" id="name" placeholder="Your Name" value="{{.Name}}">
                                                            </p>
                                                            <p>
                                                                <input name="email" type="text" id="email" placeholder="Your Email" value="{{.Email}}"> 
                                                            </p>    
                                                            <input name="id" type="hidden" value="{{.ID}}"> 
                                                            <input name="type" type="hidden" value="client">                                                                                                
                                                            <input type="submit" class="mainBtn" id="submit" value="Update Profile">
                                                        </form>
                                                    </div> <!-- /.contact-form -->

                                                </div> <!-- /.team-overlay -->
                                        </div> <!-- /.member-thumb -->
                                                                               
                                </div> <!-- /#service-1 -->
                            </div> <!-- /.col-md-3 -->
                            <div class="col-md-3 col-sm-6">
                                <div class="service-item" id="service-2">

                                        
                                        <div class="member-thumb">
                                                <!-- <img src="images/profile.png" alt=""> -->
                                                <div class="team-overlay">
                                                    <h3>Find Pros</h3>
                                                    <span>Search</span>
                                                    <div class="contact-form">                                                                                       
                                                            <form method="post" name="contactform" id="contactform">                                                        
                                                                    <!-- <input type="text" placeholder="Search by keyword" aria-label="Search">
                                                                    <i class="fa fa-search" aria-hidden="true"></i> -->
                        
                                                                    <select name="vendorCategory" id="vendorCategory">
                                                                        <option value="noselection" selected>no selection</option>
                                                                        <!-- <option value="plumbing">Plumbing</option>
                                                                        <option value="electrical">Electrical</option>
                                                                        <option value="hvac">Heating & A/C</option> -->
                                                                    </select>                                                                                                           
                                                            </form>
                                                    </div> <!-- /.contact-form -->

                                                </div> <!-- /.team-overlay -->
                                        </div> <!-- /.member-thumb -->                                                                               

                                </div> <!-- /#service-1 -->
                            </div> <!-- /.col-md-3 -->
                            <div class="col-md-3 col-sm-6">
                                <div class="service-item" id="service-3">
                                        <div class="member-thumb">
                                                <!-- <img src="images/profile.png" alt=""> -->
                                                <div class="team-overlay">
                                                    <h3>My Vendor Search Results</h3>
                                                    <span>Results</span>

                                                    <ul class="progess-bars">
                                                            <li>
                                                                <div class="progress">
                                                                    <div class="progress-bar" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100" style="width: 90%;">Jake's Repair 90%</div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="progress">
                                                                    <div class="progress-bar" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%;">Virgil's Handyman 80%</div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="progress">
                                                                    <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%;">Slim's Roofing 70%</div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="progress">
                                                                    <div class="progress-bar" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%;">Handy Andy 80%</div>
                                                                </div>
                                                            </li>
                                                        </ul>

                                                </div> <!-- /.team-overlay -->
                                        </div> <!-- /.member-thumb -->
                                </div> <!-- /#service-1 -->
                            </div> <!-- /.col-md-3 -->
                            <div class="col-md-3 col-sm-6">
                                <div class="service-item" id="service-4">
                                        <div class="member-thumb">
                                                <!-- <img src="images/profile.png" alt=""> -->
                                                <div class="team-overlay">
                                                    <h3>My Vendor Quote Request</h3>
                                                    <span>Quotes</span>

                                                    <ul class="progess-bars">                                                            
                                                            <li>
                                                                <div class="progress">
                                                                    <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%;">Slim's Roofing 70%</div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="progress">
                                                                    <div class="progress-bar" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%;">Handy Andy 80%</div>
                                                                </div>
                                                            </li>
                                                        </ul>

                                                </div> <!-- /.team-overlay -->
                                        </div> <!-- /.member-thumb -->
                                </div> <!-- /#service-1 -->
                            </div> <!-- /.col-md-3 -->
                        </div> <!-- /.row -->
                    </div> <!-- /.container -->
                </div> <!-- /#services -->               
            
        <div id="footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 col-xs-12 text-left">
                        <span>Copyright &copy; 2020 Company Name . Design: TemplateMo</span>
                  </div> <!-- /.text-center -->
                    <div class="col-md-4 hidden-xs text-right">
                        <a href="#top" id="go-top">Back to top</a>
                    </div> <!-- /.text-center -->
                </div> <!-- /.row -->
            </div> <!-- /.container -->
        </div> <!-- /#footer -->
        
        <script src="js/vendor/jquery-1.11.0.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.0.min.js"><\/script>')</script>
        <script src="js/bootstrap.js"></script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>

        <!-- Google Map -->      
        <script src="js/vendor/jquery.gmap3.min.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        
        <!-- Init-->
        <script type="text/javascript">
           (function(){               
                getvendorcategories();
           })();

           /*
           * Get all vendor categories from the rest web service
           */
           function getvendorcategories(){
                // Prepopulate the categories dropdown/select from the DB
                axios.get('/getvendorcategories')
                .then(function (response) {
                    categories = response.data;
                    //populate html select element with the data
                    sel = document.getElementById('vendorCategory');

                    categories.forEach(function( item, index){                     
                        sel.options[sel.options.length] = new Option(item.vendorCategory, item.vendorCategory);                        
                    });
                    // console.log(response.data);
                })
                .catch(function (error) {
                    console.log(error);
                })
                .finally(function () {
                    // always executed
                });  
           }
           /*
           * Submit user profile update form
           */
           function updateFunction(){
                var formData = new FormData($("#profileform")[0]);                    
                
                $.ajax({
                    url: '/updateUserProfile',
                    type:"POST",	  	 
                    data:{
                                "id":formData.get("id"),
                                "name":formData.get("name"),
                                "email":formData.get("email"),
                                "type":formData.get("type"),
                                "vendorCategory":formData.get("vendorCategory"),                             
                            },
                    success: function(result,status,xhr){
                        if(status.localeCompare("success") == 0){
                            console.log("success");//TODO update view with success msg
                        }
                    },
                    error: function(xhr,status,error) {	  		
                        if(status.localeCompare("error") == 0){
                            var errorCode = parseInt(xhr.status);
                            switch(errorCode){
                            
                                case 400:
                                    console.log("Test400");
                                    break;		  			

                                case 401:
                                    console.log("Test401");
                                    break;
                                    
                                case 403:
                                    console.log("Test403");
                                    break;	  					

                                case 404:
                                    console.log("Test404");                                    
                                    break;	  					  				
                                                                                                        
                                default:
                                    break;
                            }	  			
                        }
                    }
                });
                              
                //use jquery ajax - axios is sending json to route which is not unmarshalling
                // axios.post('/updateUserProfile', {
                //         "id":formData.get("id"),
                //         "name":formData.get("name"),
                //         "email":formData.get("email"),
                //         "type":formData.get("type"),
                //         "vendorCategory":formData.get("vendorCategory"),                             
                //     })
                //         .then(function (response) {
                //             console.log(response);
                //     })
                //     .catch(function (error) {
                //         console.log(error);
                //     })
                //     .finally(function () {
                //         // always executed
                //     });
           }
        </script>
        <!-- templatemo 406 flex -->
    </body>
</html>